Index: test.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import requests\r\nfrom requests.packages.urllib3.exceptions import InsecureRequestWarning\r\nfrom bs4 import BeautifulSoup\r\nimport re\r\n\r\ndef get_page():\r\n    url = 'https://edu.163.com/special/002987KB/newsdata_edu_hot.js?callback=data_callback'\r\n    headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'}\r\n    # 忽略requests证书警告\r\n    requests.packages.urllib3.disable_warnings(InsecureRequestWarning)\r\n    response = requests.get(url,headers=headers,verify=False)\r\n    text = response.text\r\n    return  text\r\n\r\ndef parse_page(text):\r\n    title = re.findall(r'\\\"title\\\":\\\"(.*?)\\\"',text)\r\n    docurl = re.findall(r'\\\"docurl\\\":\\\"(.*?)\\\"',text)\r\n    return title,docurl\r\n\r\ndef get_article_page(docurl):\r\n    data=[]\r\n    # for i in range(len(docurl)):\r\n    headers = {\r\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'}\r\n    requests.packages.urllib3.disable_warnings(InsecureRequestWarning)\r\n    response = requests.get(docurl,headers=headers,verify=False)\r\n    doc_html = response.text\r\n    doc_title = re.findall(r'<h1 class=\"post_title\">(.*?)</h1>',doc_html)\r\n    doc_info = re.findall(r'<div class=\"post_info\">(.*?)</a>',doc_html)\r\n    doc_text = re.findall(r'<div class=\"post_body\">(.*?)<!-- AD200x300_1 -->')\r\n    return  doc_html\r\n\r\n\r\nif __name__ == '__main__':\r\n    text = get_page()\r\n    title,docurl = parse_page(text)\r\n    doc_text = get_article_page(docurl[0])\r\n    print(doc_text)\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/test.py b/test.py
--- a/test.py	(revision 241cb7e4cb445322dfe4f058c60a8f21ae061f51)
+++ b/test.py	(date 1627304998977)
@@ -27,7 +27,7 @@
     doc_html = response.text
     doc_title = re.findall(r'<h1 class="post_title">(.*?)</h1>',doc_html)
     doc_info = re.findall(r'<div class="post_info">(.*?)</a>',doc_html)
-    doc_text = re.findall(r'<div class="post_body">(.*?)<!-- AD200x300_1 -->')
+    doc_text = re.findall(r'<div class="post_body">(.*?)<!-- AD200x300_1 -->',doc_html)
     return  doc_html
 
 
